model Product {
  id String @id @default(uuid()) @db.Uuid

  title       Json
  slug        String   @unique
  description Json?
  images      String[] @map("image_urls")

  rating      Float @default(0.0)
  extraRating Json  @default("{\"taste\": 0.0, \"aroma\": 0.0, \"packaging\": 0.0}") @map("extra_rating")

  reviews   Review[]
  variants  ProductVariant[]
  discounts Discount[]       @relation(name: "discount_to_product")

  category   Category @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  categoryId String   @map("category_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("products")
}

model ProductVariant {
  id  String @id @default(nanoid())
  art Int    @unique @default(autoincrement())

  weight     Float
  priceInUsd Float @map("price_usd")

  cartItems CartItem[]

  product   Product @relation(fields: [productId], references: [id])
  productId String  @map("product_id") @db.Uuid

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("product_variants")
}
